import{j as _,d as C,k as f,a8 as L,r as N,z as S,a as $,l as E,b as p,w as x,t as r,a4 as M,ad as z,f as F,a3 as R,ae as U}from"./index-6c35e04c.js";const q=["position","size"],A={class:"layui-input-number-input"},G=_(C({name:"LayInputNumber",props:{modelValue:{default:0},name:null,disabled:{type:Boolean,default:!1},disabledInput:{type:Boolean,default:!1},size:null,step:{default:1},position:null,min:{default:-1/0},max:{default:1/0}},emits:["update:modelValue","change"],setup(i,{emit:g}){const t=i,{size:V}=function(e){return{size:f(()=>{const a=L("LayForm",{});return e.size||a.size||"md"})}}(t);let l=N(t.modelValue);S(l,e=>{t.max!==1/0&&e>t.max?l.value=t.max:t.min!==-1/0&&e<t.min?l.value=t.min:h(l.value)&&(s.value=Number(l.value),g("update:modelValue",s.value),g("change",s.value))}),S(()=>t.modelValue,e=>{e!==l.value&&(l.value=t.modelValue)});let b=0;const s=N(0),w=f(()=>!!t.disabled||(t.min!==-1/0?Number(t.min)>=l.value:void 0)),B=f(()=>!!t.disabled||(t.max!==1/0?Number(t.max)<=l.value:void 0)),I=function(){l.value=function(e,a){var n,u,m,o;try{n=e.toString().split(".")[1].length}catch{n=0}try{u=a.toString().split(".")[1].length}catch{u=0}if(o=Math.abs(n-u),m=Math.pow(10,Math.max(n,u)),o>0){var c=Math.pow(10,o);n>u?(e=Number(e.toString().replace(".","")),a=Number(a.toString().replace(".",""))*c):(e=Number(e.toString().replace(".",""))*c,a=Number(a.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),a=Number(a.toString().replace(".",""));return(e+a)/m}(l.value,t.step)},k=function(){l.value=function(e,a){var n,u,m,o;try{n=e.toString().split(".")[1].length}catch{n=0}try{u=a.toString().split(".")[1].length}catch{u=0}if(o=Math.abs(n-u),m=Math.pow(10,Math.max(n,u)),o>0){var c=Math.pow(10,o);n>u?(e=Number(e.toString().replace(".","")),a=Number(a.toString().replace(".",""))*c):(e=Number(e.toString().replace(".",""))*c,a=Number(a.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),a=Number(a.toString().replace(".",""));return(e-a)/m}(l.value,t.step)},y=function(e){d(),t.disabled||(b=setInterval(()=>e.call(b),150),e.call(b))},d=function(){clearInterval(b)},j=function(){h(l.value)?s.value=Number(l.value):l.value=s.value},h=function(e){return!isNaN(e)};return(e,a)=>($(),E("div",{class:"layui-input-number",position:i.position,size:r(V)},[p(z,{size:"lg",onMouseup:d,onMousedown:a[0]||(a[0]=n=>y(k)),onBlur:d,disabled:r(w),class:"layui-control-btn layui-subtraction-btn"},{default:x(()=>[p(r(M),{type:i.position==="right"?"layui-icon-down":"layui-icon-subtraction"},null,8,["type"])]),_:1},8,["disabled"]),F("div",A,[p(U,{max:i.max,min:i.min,name:i.name,modelValue:r(l),"onUpdate:modelValue":a[1]||(a[1]=n=>R(l)?l.value=n:l=n),readonly:i.disabledInput||i.disabled,disabled:i.disabledInput||i.disabled,onInput:j,type:"number"},null,8,["max","min","name","modelValue","readonly","disabled"])]),p(z,{size:"lg",onMouseup:d,onMousedown:a[2]||(a[2]=n=>y(I)),onBlur:d,disabled:r(B),class:"layui-control-btn layui-addition-btn"},{default:x(()=>[p(r(M),{type:i.position==="right"?"layui-icon-up":"layui-icon-addition"},null,8,["type"])]),_:1},8,["disabled"])],8,q))}}));export{G as y};
