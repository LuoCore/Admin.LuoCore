import{j as U,d as j,a6 as C,r as v,k as m,R as ee,am as le,t as s,a as b,l as R,c as _,an as ae,ao as te,q as J,s as w,e as se,x as P,n as S,f as H,v as oe,o as ne,z as ue,ap as de,a5 as k,b as M,w as h,F as re,I as ie,aq as pe,ak as A,aa as L,ar as E,B as G,a8 as ce,ab as ve,as as me}from"./index-ca6d4815.js";import{M as fe}from"./useConfirm-31f08ffb.js";const F=j({name:"LaySelectOption",props:{label:{default:""},value:null,disabled:{type:Boolean,default:!1},keyword:{default:""}},setup(a){const n=a,o=C("searchValue"),B=C("selectRef"),i=C("searchMethod"),p=C("selectedValue"),r=C("multiple"),V=v(),x=()=>{var d;r.value?n.disabled||((d=V.value)==null||d.toggle()):n.disabled||(B.value.hide(),p.value=n.value)},g=m(()=>r.value?p.value.indexOf(n.value)!=-1:p.value===n.value),c=v(!0),$=m(()=>{var d,f;return i&&!c.value?i(o.value,n):(c.value=!1,((d=n.keyword)==null?void 0:d.toString().indexOf(o.value))>-1||((f=n.label)==null?void 0:f.toString().indexOf(o.value))>-1)}),N=m(()=>["layui-select-option",{"layui-this":g.value,"layui-disabled":n.disabled}]);return(d,f)=>ee((b(),R("dd",{class:S(s(N)),onClick:x},[s(r)?(b(),_(te,{key:0,skin:"primary",ref_key:"checkboxRef",ref:V,modelValue:s(p),"onUpdate:modelValue":f[0]||(f[0]=T=>ae(p)?p.value=T:null),disabled:a.disabled,value:a.value},null,8,["modelValue","disabled","value"])):J("",!0),w(d.$slots,"default",{},()=>[se(P(a.label),1)])],2)),[[le,s($)]])}}),Ce=U(F),ye={class:"layui-select-option-group"},he={class:"layui-select-option-group-label"},W=j({name:"LaySelectOptionGroup",props:{label:{default:"Group Name"}},setup:a=>(n,o)=>(b(),R("div",ye,[H("dt",he,P(a.label),1),w(n.$slots,"default")]))});U(W);const be={class:"layui-select-content"},ge=j({name:"LaySelect",props:{name:null,disabled:{type:Boolean,default:!1},placeholder:null,searchPlaceholder:null,searchMethod:null,modelValue:{default:null},multiple:{type:Boolean,default:!1},items:null,options:null,size:null,collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},allowClear:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},contentClass:null,contentStyle:null},emits:["update:modelValue","change","search"],setup(a,{emit:n}){const o=a,{size:B}=function(e){return{size:m(()=>{const t=C("LayForm",{});return e.size||t.size||"md"})}}(o),i=oe(),p=v(),r=v(""),V=v(""),x=v([]),g=v(!1),c=v([]),$=v(!1);var N;const d=(e,t)=>{e==null||e.map(l=>{if(me(l,l.children))d(l.children,t);else{if(l.type.name==F.name){if(l.children){const y=l.children.default()[0].children;typeof y=="string"&&(l.props.label=y)}t.push(l.props)}l.type.name==W.name&&l.children&&d(l.children.default(),t)}})},f=()=>{const e=[];i.default&&d(i.default(),e),Object.assign(e,o.options||o.items),JSON.stringify(e)!=JSON.stringify(c.value)&&(c.value=e)},T=m(()=>o.options||o.items),Q=e=>{Array.isArray(u.value)&&(u.value=u.value.filter(t=>t!=e))},X=()=>{$.value=!0},Y=e=>{$.value=!1,I(e.target.value)};ne(()=>{f(),N=setInterval(f,500),ue([u,c],()=>{var e,t;if(O.value)try{x.value=(e=u.value)==null?void 0:e.map(l=>{var y=c.value.find(z=>(z.disabled==""||z.disabled==1?z.closable=!1:z.closable=!0,z.value===l));return y==null&&(y={label:l,value:l,closable:!0}),y})}catch{throw new Error("v-model / model-value is not an array type")}else r.value="",V.value=(t=c.value.find(l=>l.value===u.value))==null?void 0:t.label},{immediate:!0,deep:!0})}),de(()=>{clearInterval(N)});const u=m({get:()=>o.multiple&&o.modelValue==null?[]:o.modelValue,set(e){n("update:modelValue",e),n("change",e)}}),O=m(()=>o.multiple),I=e=>{$.value||(n("search",e),r.value=e)},K=()=>{O.value?u.value=[]:u.value=""},Z=()=>{r.value="",g.value=!1},q=m(()=>Array.isArray(u)?u.value.length>0:u.value!=""&&u.value!=null&&u.value!=null),D=m(()=>q.value?"":o.placeholder);return k("selectRef",p),k("openState",g),k("selectedValue",u),k("searchValue",r),k("multiple",O),k("searchMethod",o.searchMethod),(e,t)=>(b(),R("div",{class:S(["layui-select",{"has-content":s(q),"has-clear":a.allowClear,"has-disabled":a.disabled}])},[M(ve,{ref_key:"selectRef",ref:p,disabled:a.disabled,contentClass:a.contentClass,contentStyle:a.contentStyle,"update-at-scroll":!0,autoFitWidth:!0,onHide:Z,onShow:t[5]||(t[5]=l=>g.value=!0)},{content:h(()=>[H("dl",be,[c.value||a.items?(b(!0),R(re,{key:0},ie(s(T),(l,y)=>(b(),_(F,pe(l,{key:y}),null,16))),128)):J("",!0),w(e.$slots,"default")])]),default:h(()=>[s(O)?(b(),_(fe,{key:0,modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=l=>x.value=l),"input-value":r.value,"onUpdate:input-value":t[1]||(t[1]=l=>r.value=l),"allow-clear":a.allowClear,placeholder:s(D),collapseTagsTooltip:a.collapseTagsTooltip,minCollapsedNum:a.minCollapsedNum,disabled:a.disabled,disabledInput:!a.showSearch,size:s(B),class:S({"layui-unselect":!0}),style:{width:"100%"},onRemove:Q,onClear:K,onInputValueChange:I,onKeyupCapture:[t[2]||(t[2]=A(L(()=>{},["prevent","stop"]),["delete"])),t[3]||(t[3]=A(L(()=>{},["prevent","stop"]),["backspace"]))],onKeydownCapture:t[4]||(t[4]=A(L(()=>{},["prevent","stop"]),["enter"]))},E({suffix:h(()=>[M(s(G),{type:"layui-icon-triangle-d",class:S({triangle:g.value})},null,8,["class"])]),_:2},[s(i).prepend?{name:"prepend",fn:h(()=>[w(e.$slots,"prepend")]),key:"0"}:void 0,s(i).append?{name:"append",fn:h(()=>[w(e.$slots,"append")]),key:"1"}:void 0]),1032,["modelValue","input-value","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabled","disabledInput","size"])):(b(),_(ce,{key:1,size:s(B),disabled:a.disabled,readonly:!a.showSearch,modelValue:V.value,"allow-clear":a.allowClear,placeholder:s(D),class:S({"layui-unselect":!a.showSearch}),onCompositionstart:X,onCompositionend:Y,onInput:I,onClear:K},E({suffix:h(()=>[M(s(G),{type:"layui-icon-triangle-d",class:S({triangle:g.value})},null,8,["class"])]),_:2},[s(i).prepend?{name:"prepend",fn:h(()=>[w(e.$slots,"prepend")]),key:"0"}:void 0,s(i).append?{name:"append",fn:h(()=>[w(e.$slots,"append")]),key:"1"}:void 0]),1032,["size","disabled","readonly","modelValue","allow-clear","placeholder","class"]))]),_:3},8,["disabled","contentClass","contentStyle"])],2))}}),Se=U(ge);export{Se as A,Ce as x};
