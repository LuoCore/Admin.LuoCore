import{r as A}from"./index-e39850d5.js";import{d as G,C as Q,B as j,r as l,D as J,E as I,a as i,c as u,w as a,b as m,t as c,G as p,e as d,f as S,l as k,F as O,H as W,x as y,I as D,q as z,Z as f,A as X,V as Y}from"./index-1ab8f9a4.js";import{x as ee}from"./index-bc915607.js";import{_ as te}from"./index-98ab11c2.js";/* empty css              */import{u as se}from"./useConfirm-11c59cfd.js";import ae from"./issuesInfoEditDialog-188127e8.js";import oe from"./issuesInfoSearchForm-98a195b1.js";import{R as ie,D as re}from"./Issues-f18f7089.js";import{$ as ne}from"./index2-48571242.js";import"./index2-6c9e33fc.js";import"./index2-bee1d30f.js";/* empty css              */import"./index-8510c5d1.js";import"./index-47fb792e.js";import"./index2-e209708c.js";import"./FileUpload-d9efcc98.js";import"./index-3e6335ae.js";import"./index-1b79fb72.js";const le=[{key:"issuesInfoId",title:"序号",width:"80px",fixed:"left",sort:"desc"},{key:"systemTypeName",title:"系统类型名称",width:"150px"},{key:"systemTypeName",title:"系统类型名称",width:"120px"},{key:"issuesDescription",title:"系统类型描述",align:"center",customSlot:"issuesDescription"},{key:"sortId",title:"排序号",align:"center",width:"80px"},{key:"developerStartTime",title:"开发开始时间",align:"center",width:"160px",customSlot:"developerStartTime"},{key:"developerEndTime",title:"开发结束时间",align:"center",width:"160px",customSlot:"developerStartTime"},{key:"developerUserName",title:"开发者",width:"100px"},{key:"createTime",title:"创建时间",align:"center",width:"160px",customSlot:"createTime"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],ue={style:{display:"grid"}},ce={key:0},me={key:0},de=["innerHTML"],Ee=G({__name:"index",setup(pe){var b;const V=((b=Q().meta)==null?void 0:b.title)||"",{loading:M,setLoading:g}=j(!0),E=l(),T=l([]),w=l([]),q=l(["filter"]),_=J({current:1,limit:10,total:0,showRefresh:!0}),v=l(!1),N=l(),o={currentPageNum:1,pageSize:10};function H(s){o.requestData=s}g(!1);function h(s){const e={requestData:s||o.requestData,pageSize:o.pageSize,currentPageNum:o.currentPageNum};C(e)}async function C(s){g(!0);try{const e=await ie(s);if(!e||!e.isSuccess)return;s&&s.currentPageNum&&(_.current=s.currentPageNum),_.total=e.pageCount,T.value=e.responseData}catch{}finally{g(!1)}}function L(s){const e=E.value.formModel;o.pageSize=s.limit,o.currentPageNum=s.current;const r={requestData:e,pageSize:o.pageSize,currentPageNum:o.currentPageNum};C(r)}function R(s){if(!s){f.msg("无法获取到行的数据信息",{icon:2,time:2e3});return}se("确定要删除这条数据吗？",async()=>{try{const e=await re(s.issuesInfoId);if(!e||!e.isSuccess){f.confirm(e.message||"操作失败",{icon:2});return}f.msg(e.message||"操作成功",{icon:1}),h()}catch(e){f.msg(e.message,{icon:2})}finally{}})}function P(s){N.value=s,v.value=!0}return(s,e)=>{const r=X,U=ne,B=Y,$=te,F=ee,K=A,x=I("any-permission"),Z=I("permission");return i(),u(K,{fluid:"true",class:"card-container"},{default:a(()=>[m(F,{title:c(V)},{default:a(()=>[m(oe,{"form-data":o.requestData,"onUpdate:updateParam":H},null,8,["form-data"]),m($,{"selected-keys":w.value,"onUpdate:selectedKeys":e[2]||(e[2]=t=>w.value=t),loading:c(M),page:_,columns:c(le),"data-source":T.value,"default-toolbar":q.value,"auto-cols-width":!0,"max-height":"450px",onChange:L},{toolbar:a(()=>[p((i(),u(r,{size:"sm",type:"normal",onClick:e[0]||(e[0]=t=>h())},{default:a(()=>[d(" 查询 ")]),_:1})),[[x,["sys:user:add","sys:user:save"]]]),p((i(),u(r,{size:"sm",type:"primary",onClick:e[1]||(e[1]=t=>P())},{default:a(()=>[d(" 新增 ")]),_:1})),[[x,["sys:user:add","sys:user:save"]]])]),operator:a(({row:t})=>[p((i(),u(r,{size:"xs",type:"primary",onClick:n=>P(t)},{default:a(()=>[d(" 修改 ")]),_:2},1032,["onClick"])),[[x,["sys:user:edit","sys:user:update"]]]),p((i(),u(r,{size:"xs",type:"danger",onClick:n=>R(t)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])),[[Z,"sys:user:delete"]])]),tagNames:a(({row:t})=>[S("div",ue,[(i(!0),k(O,null,W(t.tagNames,n=>(i(),u(U,{key:n,"max-width":"100px",style:{margin:"2px"}},{default:a(()=>[d(y(n||"无"),1)]),_:2},1024))),128))])]),isShow:a(({row:t})=>[m(B,{modelValue:t.isShow,"onUpdate:modelValue":n=>t.isShow=n,"onswitch-text":"显示","unswitch-text":"不显示"},null,8,["modelValue","onUpdate:modelValue"])]),createTime:a(({row:t})=>[S("span",null,y(c(D)(t.createTime,"yyyy-M-d H:m:s")),1)]),developerStartTime:a(({row:t})=>[t.developerStartTime?(i(),k("span",ce,y(c(D)(t.issueTime,"yyyy-M-d H:m:s")),1)):z("",!0)]),developerEndTime:a(({row:t})=>[t.developerEndTime?(i(),k("span",me,y(c(D)(t.issueTime,"yyyy-M-d H:m:s")),1)):z("",!0)]),issuesDescription:a(({row:t})=>[S("div",{innerHTML:t.issuesDescription},null,8,de)]),_:1},8,["selected-keys","loading","page","columns","data-source","default-toolbar"])]),_:1},8,["title"]),m(ae,{visible:v.value,"onUpdate:visible":e[3]||(e[3]=t=>v.value=t),"edit-data":N.value,onDone:h},null,8,["visible","edit-data"])]),_:1})}}});export{Ee as default};
