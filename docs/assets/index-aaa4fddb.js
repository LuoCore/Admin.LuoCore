import{r as E}from"./index-18f2e450.js";import{d as F,C as L,B as V,r,D as K,E as w,a as n,c as l,w as s,b as v,t as c,G as u,e as m,f as U,x as Z,I as A,Z as d,A as G}from"./index-53adf29b.js";import{x as H}from"./index-f2193864.js";import{_ as Q}from"./index-e2d03d9a.js";import{u as j}from"./useConfirm-a852b310.js";import{f as J,R as O,D as W}from"./fastSocketEditDialog-561a6145.js";import"./index2-5d5b79b3.js";import"./index2-21289748.js";import"./index-97c1bc5d.js";import"./index-9fd596c5.js";import"./index2-31d7a95a.js";import"./index2-79d7d27b.js";const X=[{key:"fastSocketId",title:"序号",width:"80px",fixed:"left",sort:"desc"},{key:"clientName",title:"客户名称",width:"100px"},{key:"sysTypeName",title:"系统名称",align:"center",width:"80px"},{key:"solutionName",title:"解决方案名称",align:"center",width:"150px"},{key:"socketIp",title:"中间接Ip地址",align:"center",width:"120px"},{key:"socketPort",title:"中间接端口",align:"center",width:"120px"},{key:"databaseMemo",title:"数据库备注信息"},{key:"webMemo",title:"网站备注信息"},{key:"otheMemo",title:"其他备注信息"},{key:"userName",title:"创建者",align:"center",width:"100px"},{key:"createTime",title:"创建时间",align:"center",width:"150px",customSlot:"createTime"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],pe=F({__name:"index",setup(Y){var N;const b=((N=L().meta)==null?void 0:N.title)||"",{loading:C,setLoading:p}=V(!0),P=r(),_=r([]),x=r([]),z=r(["filter","export"]),f=K({current:1,limit:10,total:0,showRefresh:!0}),y=r(!1),h=r(),o={currentPageNum:1,pageSize:10,requestData:{clientName:"",sysTypeId:0,solutionName:"",socketIp:"",socketPort:0,userId:0}};p(!1);function g(t){const e={requestData:t||o.requestData,pageSize:o.pageSize,currentPageNum:o.currentPageNum};S(e)}async function S(t){p(!0);try{const e=await O(t);if(!e||!e.isSuccess)return;t&&t.currentPageNum&&(f.current=t.currentPageNum),f.total=e.pageCount,_.value=e.responseData}catch{}finally{p(!1)}}function I(t){const e=P.value.formModel;o.pageSize=t.limit,o.currentPageNum=t.current;const i={requestData:e,pageSize:o.pageSize,currentPageNum:o.currentPageNum};S(i)}function T(t){if(!t){d.msg("请选择需要操作的行数据",{icon:2,time:2e3});return}j("确定要删除这条数据吗？",async()=>{try{const e=await W(t.fastSocketId);if(!e||!e.isSuccess){d.confirm(e.message||"操作失败",{icon:2});return}d.msg(e.message||"操作成功",{icon:1}),g()}catch(e){d.msg(e.message,{icon:2})}finally{}})}function D(t){h.value=t,y.value=!0}return(t,e)=>{const i=G,M=Q,R=H,q=E,k=w("any-permission"),B=w("permission");return n(),l(q,{fluid:"true",class:"z-container"},{default:s(()=>[v(R,{title:c(b)},{default:s(()=>[v(M,{id:"userId","selected-keys":x.value,"onUpdate:selectedKeys":e[2]||(e[2]=a=>x.value=a),loading:c(C),page:f,columns:c(X),"data-source":_.value,"default-toolbar":z.value,"auto-cols-width":!0,"max-height":"450px",onChange:I},{toolbar:s(()=>[u((n(),l(i,{size:"sm",type:"normal",onClick:e[0]||(e[0]=a=>g())},{default:s(()=>[m(" 查询 ")]),_:1})),[[k,["sys:user:add","sys:user:save"]]]),u((n(),l(i,{size:"sm",type:"primary",onClick:e[1]||(e[1]=a=>D())},{default:s(()=>[m(" 新增 ")]),_:1})),[[k,["sys:user:add","sys:user:save"]]])]),operator:s(({row:a})=>[u((n(),l(i,{size:"xs",type:"primary",onClick:$=>D(a)},{default:s(()=>[m(" 修改 ")]),_:2},1032,["onClick"])),[[k,["sys:user:edit","sys:user:update"]]]),u((n(),l(i,{size:"xs",type:"danger",onClick:$=>T(a)},{default:s(()=>[m(" 删除 ")]),_:2},1032,["onClick"])),[[B,"sys:user:delete"]])]),createTime:s(({row:a})=>[U("span",null,Z(c(A)(a.createTime,"yyyy-M-d H:m:s")),1)]),_:1},8,["selected-keys","loading","page","columns","data-source","default-toolbar"])]),_:1},8,["title"]),v(J,{visible:y.value,"onUpdate:visible":e[3]||(e[3]=a=>y.value=a),"edit-data":h.value,onDone:g},null,8,["visible","edit-data"])]),_:1})}}});export{pe as default};
