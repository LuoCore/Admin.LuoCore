import{j as O,d as G,r as g,am as Q,z as j,a as S,l as $,s as X,f as t,k as E,a8 as Y,ao as c,c as J,w as r,b as n,ae as R,q as L,ap as ee,F as ae,H as le,n as M,t as z,x as q,a4 as ne,a1 as te,a0 as oe,D as se,e as H,Z as D,J as ue,I as ie,g as re,aq as ce,V as de,K as pe,M as me,_ as ye}from"./index-7492a36a.js";import{y as fe}from"./index-5c52c41d.js";/* empty css              *//* empty css              */import{V as ve}from"./index-52c9049b.js";import{c as ge,d as _e}from"./Basic-b53b3ec4.js";import{g as be}from"./index2-7103a362.js";import"./index2-345a5c0c.js";import"./index2-27793e30.js";import"./index2-046ebce0.js";const he={class:"layui-radio-group"},Ve=O(G({name:"LayRadioGroup",props:{modelValue:{type:[String,Boolean,Number]},name:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(v,{emit:V}){const o=v,_=g(o.modelValue),b=g(o.disabled);return Q("radioGroup",{name:"LayRadioGroup",modelValue:_,naiveName:o.name,disabled:b}),j(()=>_,y=>{V("change",_.value),V("update:modelValue",_.value)},{deep:!0}),j(()=>o.modelValue,y=>_.value=y),j(()=>o.disabled,y=>b.value=y),(y,k)=>(S(),$("div",he,[X(y.$slots,"default")]))}})),ke=["size"],Ie={class:"layui-iconpicker-main"},we={class:"layui-icon-picker-clear"},Ce={class:"layui-iconpicker-suffix"},xe={class:"layui-iconpicker-view layui-iconpicker-scroll"},Me={key:0,class:"layui-iconpicker-search"},De=t("i",{class:"layui-icon layui-icon-search"},null,-1),Se={class:"layui-iconpicker-list"},Be=["onClick"],Te={class:"layui-elip"},Ne={key:1,class:"layui-iconpicker-page"},Ue={id:"layui-laypage-1",class:"layui-laypage layui-laypage-default"},ze={class:"layui-laypage-count"},$e=[t("i",{class:"layui-icon layui-icon-left"},null,-1)],qe={class:"layui-laypage-curr"},je=t("em",{class:"layui-laypage-em"},null,-1),Ee=t("span",{class:"layui-laypage-spr"},"…",-1),Fe=t("a",{href:"javascript:;",class:"layui-laypage-last",title:"尾页"},"14",-1),Ae=[t("i",{class:"layui-icon layui-icon-right"},null,-1)],Ge=O(G({name:"LayIconPicker",props:{page:{type:Boolean,default:!1},modelValue:{default:"layui-icon-face-smile"},disabled:{type:Boolean,default:!1},showSearch:{type:Boolean},allowClear:{type:Boolean},contentClass:null,contentStyle:null,size:null},emits:["update:modelValue","change"],setup(v,{emit:V}){const o=v,{size:_}=function(f){return{size:E(()=>{const e=Y("LayForm",{});return f.size||e.size||"md"})}}(o),b=E(()=>o.modelValue),y=g(null),k=g(!1),N=function(){V("update:modelValue","")},l=E(()=>o.modelValue!=null&&o.modelValue!=""),m=g([]),C=g(c.length),I=g(Math.ceil(C.value/12)),d=g(1);o.page?m.value=c.slice(0,12):m.value=c;const F=()=>{const f=12*(d.value-1),e=f+12;o.page?(m.value=c.slice(f,e),C.value=c.length,I.value=Math.ceil(c.length/12)):m.value=c},A=f=>{d.value=1;const e=12*(d.value-1),a=e+12,u=f;u?o.page?(m.value=w(u,c).slice(e,a),C.value=w(u,c).length,I.value=Math.ceil(w(u,c).length/12)):m.value=w(u,c):o.page?(m.value=c.slice(e,a),C.value=c.length,I.value=Math.ceil(c.length/12)):m.value=c},w=(f,e)=>{for(var a=[],u=f.charAt(0),s=f.length,p=0;p<e.length;p++){var h=e[p],U=!1;for(var x in h)if(typeof h[x]=="function")h[x]();else{var B="";h[x]!=null&&(B=h[x]);for(var T=0;T<B.length;T++)if(B.charAt(T)==u&&B.substring(T).substring(0,s)==f){U=!0;break}}U&&a.push(h)}return a};return(f,e)=>(S(),J(oe,{ref_key:"dropdownRef",ref:y,disabled:v.disabled,contentClass:v.contentClass,contentStyle:v.contentStyle,onHide:e[2]||(e[2]=a=>k.value=!1),onShow:e[3]||(e[3]=a=>k.value=!0),updateAtScroll:""},{content:r(()=>[t("div",xe,[v.showSearch?(S(),$("div",Me,[n(R,{onInput:A,onClear:F,autocomplete:"true","allow-clear":!0},{prefix:r(()=>[De]),_:1})])):L("",!0),t("div",Se,[n(ee,{style:{height:"200px"},thumbColor:"rgb(238, 238, 238)"},{default:r(()=>[t("ul",null,[(S(!0),$(ae,null,le(m.value,a=>(S(),$("li",{key:a,class:M([z(b)===a.class?"layui-this":""]),onClick:u=>function(s){var p;V("update:modelValue",s),V("change",s),(p=y.value)==null||p.hide()}(a.class)},[t("i",{class:M(["layui-icon",[a.class]])},null,2),t("p",Te,q(a.name),1)],10,Be))),128))])]),_:1})]),v.page?(S(),$("div",Ne,[t("div",Ue,[t("span",ze,"共 "+q(C.value)+" 个",1),t("a",{href:"javascript:;",class:M(["layui-laypage-prev",[d.value===1?"layui-disabled":""]]),onClick:e[0]||(e[0]=a=>(()=>{if(d.value===1)return;d.value=d.value-1;const u=12*(d.value-1),s=u+12;m.value=c.slice(u,s)})())},$e,2),t("span",qe,[je,t("em",null,q(d.value)+" / "+q(I.value),1)]),Ee,Fe,t("a",{href:"javascript:;",class:M([[d.value===I.value?"layui-disabled":""],"layui-laypage-next"]),onClick:e[1]||(e[1]=a=>(()=>{if(d.value===I.value)return;d.value=d.value+1;const u=12*(d.value-1),s=u+12;m.value=c.slice(u,s)})())},Ae,2)])])):L("",!0)])]),default:r(()=>[t("div",{class:M(["layui-border-box layui-iconpicker layui-iconpicker-split",[{"layui-iconpicker-disabled":v.disabled,"has-content":z(l),"has-clear":v.allowClear}]]),size:z(_)},[t("div",Ie,[t("i",{class:M(["layui-icon",[z(b)]])},null,2)]),t("span",we,[n(z(ne),{type:"layui-icon-close-fill",onClick:te(N,["stop"])},null,8,["onClick"])]),t("span",Ce,[t("i",{class:M(["layui-icon layui-icon-down",[k.value?"transform":""]])},null,2)])],10,ke)]),_:1},8,["disabled","contentClass","contentStyle"]))}}));const Le=G({__name:"MenuEditDialog",props:{visible:{type:Boolean,default:!1},parentMenuId:{default:0},formData:{}},emits:["update:visible","done"],setup(v,{emit:V}){const o=v,_=E({get(){return o.visible},set(e){V("update:visible",e)}}),b=g(),y=g(!1),k=g([]),N={menuId:0,parentId:0,menuName:"",menuIcon:"",menuUrl:"",sortId:0,menuType:1,isDisable:!1},l=se({...N});function m(e){const a={id:e.menuId,title:e.menuName,field:e.parentId,children:void 0};if(e.childrenMenus&&e.childrenMenus.length>0){const u=e.childrenMenus.map(s=>m(s));a.children=u}return a}async function C(){try{const e=await ge();if(e){if(!e.isSuccess||!e.responseData){D.msg(`获取菜单列表失败:${e.message}`,{icon:2});return}}else{D.msg("获取菜单列表失败",{icon:2});return}k.value=[{id:0,title:"父级",field:"",children:[]}],e.responseData.map(a=>{k.value[0].children.push(m(a))})}catch(e){D.msg(e.message,{icon:2})}}function I(e){l.parentId=Number(e)}function d(e){l.menuType=e}function F(){o.formData?(y.value=!0,o.parentMenuId<=0?Object.assign(l,o.formData):(Object.assign(l,N),l.parentId=o.parentMenuId)):(y.value=!1,Object.assign(l,N))}j(()=>o.visible,(e,a)=>{e&&(F(),C())});const A=g({parentId:{type:"number",required:!0,message:"父级Id不能为空"},menuName:{type:"string",required:!0,message:"菜单名称不能为空"},menuType:{type:"number",required:!0,message:"菜单类型不能为空"},sortId:{type:"number",required:!0,message:"排序号不能为空"},isDisable:{type:"boolean",required:!0,message:"是否禁用不能为空"}});function w(){var e;b.value.reset(),(e=b.value)==null||e.clearValidate(),_.value=!1}function f(){b.value.validate((e,a,u)=>{e&&D.msg("正在提交数据...",{icon:16,time:0,shade:!0,success:async s=>{try{var p=await _e(a);p&&p.isSuccess?(D.msg("操作成功",{icon:1}),V("done"),w()):D.confirm("操作失败！"+(p==null?void 0:p.message),{icon:2})}catch{}finally{D.close(s)}}})})}return(e,a)=>{const u=ve,s=ue,p=ie,h=re,U=ce,x=be,B=Ve,T=Ge,Z=fe,K=de,P=pe,W=me;return S(),J(W,{modelValue:_.value,"onUpdate:modelValue":a[9]||(a[9]=i=>_.value=i),area:"600px",resize:!0,size:"md",title:"菜单编辑","shade-close":!1,move:!0,maxmin:!0,btnAlign:"c",btn:[{text:"提交",callback:()=>f()},{text:"关闭",callback:()=>w()}],onClose:w},{default:r(()=>[n(P,{ref_key:"refForm",ref:b,model:l,rules:A.value,style:{padding:"10px"}},{default:r(()=>[n(s,{label:"上级菜单",prop:"parentId",required:""},{default:r(()=>[n(u,{modelValue:l.parentId,"onUpdate:modelValue":a[0]||(a[0]=i=>l.parentId=i),"allow-clear":!0,search:!0,data:k.value,disabled:y.value,style:{width:"100%"},onChange:a[1]||(a[1]=i=>I(i))},null,8,["modelValue","data","disabled"])]),_:1}),n(s,{label:"菜单名称",prop:"menuName",required:""},{default:r(()=>[n(p,{modelValue:l.menuName,"onUpdate:modelValue":a[2]||(a[2]=i=>l.menuName=i),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),n(s,{prop:"menuUrl"},{label:r(()=>[H(" 路由地址 "),n(U,{content:l.menuType==0?"如果类型是菜单，需要写菜单路由":"如果类型是按钮，路由地址可以不用填写"},{default:r(()=>[n(h,{type:"layui-icon-about"})]),_:1},8,["content"])]),default:r(()=>[n(p,{modelValue:l.menuUrl,"onUpdate:modelValue":a[3]||(a[3]=i=>l.menuUrl=i),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),n(s,{label:"菜单类型",prop:"menuType",required:""},{default:r(()=>[n(B,{modelValue:l.menuType,"onUpdate:modelValue":a[4]||(a[4]=i=>l.menuType=i),name:"menuType",onChange:a[5]||(a[5]=i=>d(i))},{default:r(()=>[n(x,{value:1,label:"菜单"}),n(x,{value:2,label:"按钮"})]),_:1},8,["modelValue"])]),_:1}),n(s,{label:"菜单图标",prop:"menuIcon"},{default:r(()=>[n(T,{modelValue:l.menuIcon,"onUpdate:modelValue":a[6]||(a[6]=i=>l.menuIcon=i),"allow-clear":""},null,8,["modelValue"])]),_:1}),n(s,{label:"排序",prop:"sortId"},{default:r(()=>[n(Z,{modelValue:l.sortId,"onUpdate:modelValue":a[7]||(a[7]=i=>l.sortId=i),position:"right",min:0},null,8,["modelValue"])]),_:1}),n(s,{prop:"isShow",class:"switch-fix"},{label:r(()=>[H(" 是否禁用 "),n(U,{content:"如果禁用，则不会出现在左侧菜单栏"},{default:r(()=>[n(h,{type:"layui-icon-about"})]),_:1})]),default:r(()=>[n(K,{modelValue:l.isDisable,"onUpdate:modelValue":a[8]||(a[8]=i=>l.isDisable=i),"onswitch-value":!0,"onswitch-text":"是","unswitch-value":!1,"unswitch-text":"否"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","btn"])}}});const Re=ye(Le,[["__scopeId","data-v-554185c4"]]);export{Re as default};
