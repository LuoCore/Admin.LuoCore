import{u as B}from"./index-0724e43b.js";import{d as U,r as m,z as w,o as k,a as F,c as G,w as l,b as t,Z as u,J as M,I as N,T as O,K as j}from"./index-7c55f663.js";/* empty css              */import{A,x as E}from"./index-5f419692.js";import{V as R}from"./index-b939e259.js";import{a as Z}from"./Blogs-6f111a20.js";import{a as z}from"./Basic-bc49e0e2.js";const Q=U({__name:"ArticleSearchForm",props:{formData:{}},emits:["update:formSearchDataUpdate"],setup(v,{expose:b,emit:c}){const d=v,i=m(),p={userId:0,categoryId:0,articleTitle:"",timeType:0,timeStart:"",timeEnd:""},o=m({...p});d.formData&&Object.assign(o.value,d.formData),c("update:formSearchDataUpdate",o.value);function h(e){o.value.timeStart=e[0],o.value.timeEnd=e[1]}w(o,e=>{console.log("文章查询条件检测",e),c("update:formSearchDataUpdate",e)},{deep:!0});const f=m([]),_=m([]);function y(e){const a={id:e.categoryId,title:e.categoryName,field:e.parentId,children:void 0};if(e.childrenCategorys&&e.childrenCategorys.length>0){const s=e.childrenCategorys.map(r=>y(r));a.children=s}return a}async function I(){try{const a=await Z();if(a){if(!a.isSuccess||!a.responseData){u.msg(`获取分类列表失败:${a.message}`,{icon:2});return}}else{u.msg("获取分类列表失败",{icon:2});return}a.responseData.map(s=>{f.value.push(y(s))})}catch(a){u.msg(a.message,{icon:2})}const e=await z();if(!e||!e.isSuccess){u.msg((e==null?void 0:e.message)||"获取信息失败",{icon:2});return}_.value=e.responseData.map(a=>({label:a.userName,value:a.userId}))}function T(){const e=i.value.reset();return Object.assign(o.value,p),e}return k(()=>{I()}),b({resetFormData:T}),(e,a)=>{const s=A,r=M,V=N,C=R,g=E,D=O,x=j,S=B;return F(),G(S,null,{default:l(()=>[t(x,{ref_key:"searchFormRef",ref:i,model:o.value},{default:l(()=>[t(r,{label:"用户",prop:"userId",mode:"inline"},{default:l(()=>[t(s,{modelValue:o.value.userId,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.userId=n),options:_.value},null,8,["modelValue","options"])]),_:1}),t(r,{label:"文章标题",prop:"articleTitle",mode:"inline"},{default:l(()=>[t(V,{modelValue:o.value.articleTitle,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.articleTitle=n),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),t(r,{label:"文章分类",prop:"categoryId",mode:"inline"},{default:l(()=>[t(C,{modelValue:o.value.categoryId,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.categoryId=n),data:f.value},null,8,["modelValue","data"])]),_:1}),t(r,{label:"时间类型",prop:"timeType",mode:"inline"},{default:l(()=>[t(s,{modelValue:o.value.timeType,"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.timeType=n),placeholder:"请选择时间类型"},{default:l(()=>[t(g,{value:1,label:"创建时间"}),t(g,{value:2,label:"发布时间"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"时间"},{default:l(()=>[t(D,{onChange:h,range:"",type:"datetime",placeholder:["开始日期","结束日期"]})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Q as _};
