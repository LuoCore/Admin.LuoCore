import{r as M}from"./index-21710692.js";import{d as A,r as o,o as G,C as K,B as U,E as D,a as i,c as r,w as s,b as l,t as f,G as c,e as d,l as Z,x as q,q as R,Z as m,A as j,V as J}from"./index-7c55f663.js";import{x as O}from"./index-59efe1fc.js";import{_ as P}from"./index-cadb7b16.js";import{u as Q}from"./useConfirm-2931dd94.js";import{f as W}from"./common-42edaf76.js";import{_ as X}from"./CategoryEditDialog.vue_vue_type_script_setup_true_lang-942cb061.js";import Y from"./CategorySearchForm-41d1531b.js";import{b as ee,c as te}from"./Blogs-6f111a20.js";import"./index2-1beec9a6.js";import"./index2-314c44de.js";import"./index-4b486b9e.js";import"./index-b939e259.js";import"./index2-f6244a46.js";import"./index2-0d80dea7.js";import"./index2-a5c9f400.js";/* empty css              */const ae=[{key:"categoryId",title:"分类Id",width:"80px",fixed:"left",sort:"desc"},{key:"categoryName",title:"分类名称",width:"150px"},{key:"categoryDescription",title:"分类描述",align:"center",width:"400px"},{key:"isDisable",title:"是否禁用",align:"center",width:"100px",customSlot:"isDisable"},{key:"createTime",title:"创建时间",align:"center",width:"190px",customSlot:"createTime"},{key:"userName",title:"创建人",align:"center",width:"100px"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],se={key:0},be=A({__name:"index",setup(oe){var C;const _=o(window.innerHeight-300);G(()=>{window.addEventListener("resize",S)});function S(){_.value=window.innerHeight-300}const h=o(),T=o(!1),{loading:I,setLoading:p}=K(!0),z=((C=U().meta)==null?void 0:C.title)||"",x=o([]),k=o([]),E=o(["filter"]),y=o(!1),w=o(),g=o({categoryName:"",timeState:"",timeEnd:""});p(!1);async function v(){p(!0);try{console.log("bolog类型查询",g.value);const a=await ee(g.value);if(!a||!a.isSuccess){m.confirm((a==null?void 0:a.message)||"查询数据失败！");return}x.value=a.responseData}catch{}finally{p(!1)}}function $(a){if(!a){m.msg("请选择需要删除的数据！",{icon:2,time:2e3});return}Q("确定要删除这条数据吗？",async()=>{try{const e=await te(a.categoryId);if(!e||!e.isSuccess){m.confirm(e.message||"操作失败",{icon:2});return}m.msg(e.message||"操作成功",{icon:1}),v()}catch(e){m.msg(e.message,{icon:2})}finally{}})}function b(a){w.value=a,y.value=!0}return(a,e)=>{const n=j,N=J,B=P,H=O,F=M,u=D("any-permission"),L=D("permission");return i(),r(F,{fluid:"true",class:"z-container"},{default:s(()=>[l(H,{title:f(z)},{default:s(()=>[l(Y,{ref_key:"searchForm",ref:h,"form-data":g.value},null,8,["form-data"]),l(B,{id:"categoryId","selected-keys":k.value,"onUpdate:selectedKeys":e[3]||(e[3]=t=>k.value=t),"children-column-name":"childrenCategories",height:`${_.value}px`,"default-expand-all":T.value,loading:f(I),columns:f(ae),"data-source":x.value,"default-toolbar":E.value,"expand-index":1},{toolbar:s(()=>[c((i(),r(n,{size:"sm",type:"normal",onClick:e[0]||(e[0]=t=>v())},{default:s(()=>[d(" 查询 ")]),_:1})),[[u,["sys:user:add","sys:user:save"]]]),c((i(),r(n,{size:"sm",border:"blue",onClick:e[1]||(e[1]=t=>h.value.resetFormData())},{default:s(()=>[d(" 重置表单 ")]),_:1})),[[u,["sys:user:add","sys:user:save"]]]),c((i(),r(n,{size:"sm",type:"primary",onClick:e[2]||(e[2]=t=>b())},{default:s(()=>[d(" 新增 ")]),_:1})),[[u,["sys:user:add","sys:user:save"]]])]),operator:s(({row:t})=>[c((i(),r(n,{size:"xs",type:"primary",onClick:V=>b(t)},{default:s(()=>[d(" 修改 ")]),_:2},1032,["onClick"])),[[u,["sys:user:edit","sys:user:update"]]]),c((i(),r(n,{size:"xs",type:"danger",onClick:V=>$(t.articleId)},{default:s(()=>[d(" 删除 ")]),_:2},1032,["onClick"])),[[L,"sys:user:delete"]])]),createTime:s(({row:t})=>[t.createTime?(i(),Z("span",se,q(f(W)(t.createTime,"yyyy-M-d H:m:s")),1)):R("",!0)]),isDisable:s(({row:t})=>[l(N,{"model-value":t.isDisable,"onswitch-text":"是","onswitch-value":!0,"unswitch-text":"否","unswitch-value":!1},null,8,["model-value"])]),_:1},8,["selected-keys","height","default-expand-all","loading","columns","data-source","default-toolbar"])]),_:1},8,["title"]),l(X,{visible:y.value,"onUpdate:visible":e[4]||(e[4]=t=>y.value=t),"form-data":w.value,onDone:v},null,8,["visible","form-data"])]),_:1})}}});export{be as default};
