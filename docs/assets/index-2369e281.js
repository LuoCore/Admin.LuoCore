import{r as F}from"./index-e39850d5.js";import{d as H,C as K,B as Z,r as l,D as A,E as z,a as i,c as u,w as a,b as c,t as m,G as p,e as d,f as k,l as G,F as Q,H as j,x,I as P,Z as y,A as J,V as O}from"./index-1ab8f9a4.js";import{x as X}from"./index-bc915607.js";import{_ as Y}from"./index-98ab11c2.js";/* empty css              */import{u as ee}from"./useConfirm-11c59cfd.js";import te from"./issuesWorkEditDialog-99cc908a.js";import{f as se,g as ae}from"./Issues-f18f7089.js";import{$ as oe}from"./index2-48571242.js";import"./index2-6c9e33fc.js";import"./index2-bee1d30f.js";import"./index-8c5532e5.js";import"./index-8510c5d1.js";const ie=[{key:"issuesWorkTypeId",title:"序号",width:"80px",fixed:"left",sort:"desc"},{key:"issuesWorkTypeName",title:"问题工作类型名称",width:"150px"},{key:"issuesWorkTypeDescription",title:"问题工作类型描述",align:"center",width:"400px"},{key:"sortId",title:"排序号",align:"center",width:"400px"},{key:"createTime",title:"创建时间",align:"center",width:"190px",customSlot:"createTime"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],re={style:{display:"grid"}},we=H({__name:"index",setup(ne){var N;const I=((N=K().meta)==null?void 0:N.title)||"",{loading:W,setLoading:f}=Z(!0),V=l(),w=l([]),D=l([]),B=l(["filter"]),g=A({current:1,limit:10,total:0,showRefresh:!0}),_=l(!1),T=l(),o={currentPageNum:1,pageSize:10,requestData:{issuesWorkTypeId:0,issuesWorkTypeName:""}};f(!1);function v(s){const e={requestData:s||o.requestData,pageSize:o.pageSize,currentPageNum:o.currentPageNum};S(e)}async function S(s){f(!0);try{const e=await se(s);if(!e||!e.isSuccess)return;s&&s.currentPageNum&&(g.current=s.currentPageNum),g.total=e.pageCount,w.value=e.responseData}catch{}finally{f(!1)}}function M(s){const e=V.value.formModel;o.pageSize=s.limit,o.currentPageNum=s.current;const r={requestData:e,pageSize:o.pageSize,currentPageNum:o.currentPageNum};S(r)}function R(s){if(!s){y.msg("无法获取到行的数据信息",{icon:2,time:2e3});return}ee("确定要删除这条数据吗？",async()=>{try{const e=await ae(s.issuesWorkTypeId);if(!e||!e.isSuccess){y.confirm(e.message||"操作失败",{icon:2});return}y.msg(e.message||"操作成功",{icon:1}),v()}catch(e){y.msg(e.message,{icon:2})}finally{}})}function b(s){T.value=s,_.value=!0}return(s,e)=>{const r=J,$=oe,C=O,q=Y,E=X,L=F,h=z("any-permission"),U=z("permission");return i(),u(L,{fluid:"true",class:"z-container"},{default:a(()=>[c(E,{title:m(I)},{default:a(()=>[c(q,{"selected-keys":D.value,"onUpdate:selectedKeys":e[2]||(e[2]=t=>D.value=t),loading:m(W),page:g,columns:m(ie),"data-source":w.value,"default-toolbar":B.value,"auto-cols-width":!0,"min-height":"450px",onChange:M},{toolbar:a(()=>[p((i(),u(r,{size:"sm",type:"normal",onClick:e[0]||(e[0]=t=>v())},{default:a(()=>[d(" 查询 ")]),_:1})),[[h,["sys:user:add","sys:user:save"]]]),p((i(),u(r,{size:"sm",type:"primary",onClick:e[1]||(e[1]=t=>b())},{default:a(()=>[d(" 新增 ")]),_:1})),[[h,["sys:user:add","sys:user:save"]]])]),operator:a(({row:t})=>[p((i(),u(r,{size:"xs",type:"primary",onClick:n=>b(t)},{default:a(()=>[d(" 修改 ")]),_:2},1032,["onClick"])),[[h,["sys:user:edit","sys:user:update"]]]),p((i(),u(r,{size:"xs",type:"danger",onClick:n=>R(t)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])),[[U,"sys:user:delete"]])]),tagNames:a(({row:t})=>[k("div",re,[(i(!0),G(Q,null,j(t.tagNames,n=>(i(),u($,{key:n,"max-width":"100px",style:{margin:"2px"}},{default:a(()=>[d(x(n||"无"),1)]),_:2},1024))),128))])]),isShow:a(({row:t})=>[c(C,{modelValue:t.isShow,"onUpdate:modelValue":n=>t.isShow=n,"onswitch-text":"显示","unswitch-text":"不显示"},null,8,["modelValue","onUpdate:modelValue"])]),createTime:a(({row:t})=>[k("span",null,x(m(P)(t.createTime,"yyyy-M-d H:m:s")),1)]),issueTime:a(({row:t})=>[k("span",null,x(m(P)(t.issueTime,"yyyy-M-d H:m:s")),1)]),isDisable:a(({row:t})=>[c(C,{"model-value":t.isDisable,"onswitch-text":"是","onswitch-value":!0,"unswitch-text":"否","unswitch-value":!1},null,8,["model-value"])]),_:1},8,["selected-keys","loading","page","columns","data-source","default-toolbar"])]),_:1},8,["title"]),c(te,{visible:_.value,"onUpdate:visible":e[3]||(e[3]=t=>_.value=t),"edit-data":T.value,onDone:v},null,8,["visible","edit-data"])]),_:1})}}});export{we as default};
