import{u as B}from"./index-3e058db3.js";import{d as U,r as m,z as w,o as k,a as F,c as G,w as l,b as t,Z as u,J as M,I as N,T as O,K as j}from"./index-1ca7f9c4.js";/* empty css              */import{A,x as E}from"./index-a57ad3be.js";import{V as R}from"./index-54212f26.js";import{a as Z}from"./Blogs-a056807b.js";import{a as z}from"./Basic-304168ba.js";const Q=U({__name:"ArticleSearchForm",props:{formData:{}},emits:["update:formSearchDataUpdate"],setup(v,{expose:b,emit:c}){const d=v,i=m(),p={userId:0,categoryId:0,articleTitle:"",timeType:0,timeStart:"",timeEnd:""},o=m({...p});d.formData&&Object.assign(o.value,d.formData),c("update:formSearchDataUpdate",o.value);function h(a){o.value.timeStart=a[0],o.value.timeEnd=a[1]}w(o,a=>{c("update:formSearchDataUpdate",a)},{deep:!0});const f=m([]),_=m([]);function y(a){const e={id:a.categoryId,title:a.categoryName,field:a.parentId,children:void 0};if(a.childrenCategorys&&a.childrenCategorys.length>0){const s=a.childrenCategorys.map(r=>y(r));e.children=s}return e}async function I(){try{const e=await Z();if(e){if(!e.isSuccess||!e.responseData){u.msg(`获取分类列表失败:${e.message}`,{icon:2});return}}else{u.msg("获取分类列表失败",{icon:2});return}e.responseData.map(s=>{f.value.push(y(s))})}catch(e){u.msg(e.message,{icon:2})}const a=await z();if(!a||!a.isSuccess){u.msg((a==null?void 0:a.message)||"获取信息失败",{icon:2});return}_.value=a.responseData.map(e=>({label:e.userName,value:e.userId}))}function T(){const a=i.value.reset();return Object.assign(o.value,p),a}return k(()=>{I()}),b({resetFormData:T}),(a,e)=>{const s=A,r=M,V=N,C=R,g=E,D=O,x=j,S=B;return F(),G(S,null,{default:l(()=>[t(x,{ref_key:"searchFormRef",ref:i,model:o.value},{default:l(()=>[t(r,{label:"用户",prop:"userId",mode:"inline"},{default:l(()=>[t(s,{modelValue:o.value.userId,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.userId=n),options:_.value},null,8,["modelValue","options"])]),_:1}),t(r,{label:"文章标题",prop:"articleTitle",mode:"inline"},{default:l(()=>[t(V,{modelValue:o.value.articleTitle,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.articleTitle=n),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),t(r,{label:"文章分类",prop:"categoryId",mode:"inline"},{default:l(()=>[t(C,{modelValue:o.value.categoryId,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.categoryId=n),data:f.value},null,8,["modelValue","data"])]),_:1}),t(r,{label:"时间类型",prop:"timeType",mode:"inline"},{default:l(()=>[t(s,{modelValue:o.value.timeType,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.timeType=n),placeholder:"请选择时间类型"},{default:l(()=>[t(g,{value:1,label:"创建时间"}),t(g,{value:2,label:"发布时间"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"时间"},{default:l(()=>[t(D,{onChange:h,range:"",type:"datetime",placeholder:["开始日期","结束日期"]})]),_:1})]),_:1},8,["model"])]),_:1})}}});export{Q as _};
