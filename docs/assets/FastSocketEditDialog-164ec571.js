import{O as y,d as D,r as b,D as w,k as P,z as h,a as B,c as M,w as r,b as l,Z as m,J as N,I as q,K as E,M as O,_ as U}from"./index-c7b5f3e4.js";import{A as j}from"./index-08db7ed5.js";import{_ as G}from"./WangEditorText.vue_vue_type_script_setup_true_lang-c6af8385.js";import{b as z}from"./Basic-6a32a728.js";function A(i){return y.put("/api/Rcominfo/EditFastSocketInfo",i)}function H(i){return y.delete("/api/Rcominfo/DeleteFastSocketInfoByFastSocketId",{params:{fastSocketId:i}})}function Q(i){return y.post("/api/Rcominfo/GetFastSocketInfoPageList",i)}const T=D({__name:"FastSocketEditDialog",props:{visible:{type:Boolean,default:!1},formData:{}},emits:["update:visible","done"],setup(i,{emit:d}){const u=i,c=b(),k={fastSocketId:0,systemClientId:0,solutionName:"",socketIp:"",socketPort:0,additionalMemo:""},o=w({...k}),v=b({clientName:{type:"string",required:!0,message:"客户名称不能为空"},solutionName:{type:"string",required:!0,message:"解决方案不能为空"},socketIp:{type:"string",required:!0,message:"中间件IP不能为空"},socketPort:[{asyncValidator:(t,e,p)=>new Promise((s,n)=>{e<=0?p(new Error("端口值不能小于/等于0")):s()})}]}),f=P({get(){return u.visible},set(t){d("update:visible",t)}}),g=b([]);h(()=>u.visible,(t,e)=>{t&&V()});async function S(){const t=await z();if(!t||!t.isSuccess){m.msg((t==null?void 0:t.message)||"获取信息失败",{icon:2});return}g.value=t.responseData.map(e=>({label:e.systemClientName,value:e.systemClientId}))}function V(){S(),u.formData?Object.assign(o,u.formData):Object.assign(o,k)}function x(t){o.additionalMemo=t}function _(){var t;c.value.reset(),(t=c.value)==null||t.clearValidate(),f.value=!1}function F(){c.value.validate((t,e,p)=>{t&&m.msg("正在提交数据...",{icon:16,time:0,shade:!0,success:async s=>{try{var n=await A(e);if(!n||!n.isSuccess){m.confirm(n.message||"数据提交失败",{icon:2});return}m.msg(n.message||"操作成功",{icon:1}),d("done"),_()}catch{}finally{m.close(s)}}})})}return(t,e)=>{const p=j,s=N,n=q,I=E,C=O;return B(),M(C,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),resize:!0,size:"md",title:"中间件编辑","shade-close":!1,move:!0,maxmin:!0,btnAlign:"c",btn:[{text:"提交",callback:()=>F()},{text:"关闭",callback:()=>_()}],onClose:_},{default:r(()=>[l(I,{ref_key:"refForm",ref:c,pane:!0,model:o,rules:v.value,style:{padding:"10px"}},{default:r(()=>[l(s,{mode:"inline",label:"客户",prop:"systemClientId"},{default:r(()=>[l(p,{modelValue:o.systemClientId,"onUpdate:modelValue":e[0]||(e[0]=a=>o.systemClientId=a),items:g.value,placeholder:"请选择"},null,8,["modelValue","items"])]),_:1}),l(s,{label:"解决方案名称",prop:"solutionName",mode:"inline",required:"","label-width":150},{default:r(()=>[l(n,{modelValue:o.solutionName,"onUpdate:modelValue":e[1]||(e[1]=a=>o.solutionName=a),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),l(s,{label:"中件间IP",prop:"socketIp",required:"",mode:"inline","label-width":100},{default:r(()=>[l(n,{modelValue:o.socketIp,"onUpdate:modelValue":e[2]||(e[2]=a=>o.socketIp=a),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),l(s,{label:"中件间端口",prop:"socketPort",required:"",mode:"inline","label-width":120},{default:r(()=>[l(n,{modelValue:o.socketPort,"onUpdate:modelValue":e[3]||(e[3]=a=>o.socketPort=a),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),l(s,{label:"数据库信息备注",prop:"databaseMemo","label-position":"top"},{default:r(()=>[l(G,{"editor-height":"100px","rich-text-content":o.additionalMemo,"onUpdate:richTextContent":[e[4]||(e[4]=a=>o.additionalMemo=a),x]},null,8,["rich-text-content"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","btn"])}}});const $=U(T,[["__scopeId","data-v-c370606e"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{H as D,$ as F,Q as G,W as a};
