import{r as Z}from"./index-21710692.js";import{d as A,B as W,C as j,r as l,D as E,E as U,a,c as r,w as o,b as c,t as m,G as p,e as u,f as S,l as T,F as J,H as O,x as g,q as V,Z as v,A as Q,V as X}from"./index-7c55f663.js";import{x as Y}from"./index-59efe1fc.js";import{_ as ee}from"./index-cadb7b16.js";/* empty css              */import{u as te}from"./useConfirm-2931dd94.js";import{f as w}from"./common-42edaf76.js";import se from"./IssuesInfoEditDialog-edc77f73.js";import oe from"./IssuesInfoSearchForm-76d1acb5.js";import{G as ae,D as ie}from"./Issues-d1060287.js";import{$ as re}from"./index2-0d80dea7.js";import"./index2-1beec9a6.js";import"./index2-314c44de.js";/* empty css              */import"./index-6ed85a75.js";import"./index-5f419692.js";import"./index2-f6244a46.js";import"./FileUpload-87881942.js";import"./Basic-bc49e0e2.js";import"./index-0724e43b.js";const ne=[{key:"issuesInfoId",title:"序号",width:"80px",fixed:"left",sort:"desc"},{key:"developerUserName",title:"开发人员",width:"150px"},{key:"systemClientName",title:"客户名称",width:"120px"},{key:"issuesTypeName",title:"问题类型",width:"120px"},{key:"issuesWorkTypeName",title:"工作流程",width:"120px"},{key:"issuesDescription",title:"系统类型描述",align:"center",customSlot:"issuesDescription"},{key:"developerStartTime",title:"开发开始时间",align:"center",width:"160px",customSlot:"developerStartTime"},{key:"developerEndTime",title:"开发结束时间",align:"center",width:"160px",customSlot:"developerEndTime"},{key:"createUserName",title:"创建人",align:"center",width:"100px"},{key:"sortId",title:"排序号",align:"center",width:"80px"},{key:"createTime",title:"创建时间",align:"center",width:"160px",customSlot:"createTime"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],le={style:{display:"grid"}},me={key:0},ue={key:0},de=["innerHTML"],ze=A({__name:"index",setup(ce){var I;const P=((I=W().meta)==null?void 0:I.title)||"",{loading:z,setLoading:_}=j(!0),h=l(),D=l([]),C=l([]),M=l(["filter"]),k=E({current:1,limit:10,total:0,showRefresh:!0}),x=l(!1),N=l(),i=E({currentPageNum:1,pageSize:10,requestData:{}});function B(t){console.log("父级-问题信息搜索参数修改触发",t),i.requestData=t}_(!1);async function y(){_(!0);try{const t=await ae(i);if(!t||!t.isSuccess)return;i&&i.currentPageNum&&(k.current=i.currentPageNum),k.total=t.pageCount,D.value=t.responseData}catch{}finally{_(!1)}}function F(t){h.value.formModel,i.pageSize=t.limit,i.currentPageNum=t.current,y()}function H(t){if(!t){v.msg("无法获取到行的数据信息",{icon:2,time:2e3});return}te("确定要删除这条数据吗？",async()=>{try{const s=await ie(t.issuesTypeId);if(!s||!s.isSuccess){v.confirm(s.message||"操作失败",{icon:2});return}v.msg(s.message||"操作成功",{icon:1}),y()}catch(s){v.msg(s.message,{icon:2})}finally{}})}function b(t){N.value=t,x.value=!0}return(t,s)=>{const d=Q,L=re,$=X,q=ee,R=Y,G=Z,f=U("any-permission"),K=U("permission");return a(),r(G,{fluid:"true",class:"card-container"},{default:o(()=>[c(R,{title:m(P)},{default:o(()=>[c(oe,{ref_key:"searchForm",ref:h,"form-data":i.requestData,"onUpdate:formSearchParamUpdate":B},null,8,["form-data"]),c(q,{"selected-keys":C.value,"onUpdate:selectedKeys":s[3]||(s[3]=e=>C.value=e),loading:m(z),page:k,columns:m(ne),"data-source":D.value,"default-toolbar":M.value,"auto-cols-width":!0,"max-height":"450px",onChange:F},{toolbar:o(()=>[p((a(),r(d,{size:"sm",type:"normal",onClick:s[0]||(s[0]=e=>y())},{default:o(()=>[u(" 查询 ")]),_:1})),[[f,["sys:user:add","sys:user:save"]]]),p((a(),r(d,{size:"sm",border:"blue",onClick:s[1]||(s[1]=e=>h.value.resetFormData())},{default:o(()=>[u(" 重置表单 ")]),_:1})),[[f,["sys:user:add","sys:user:save"]]]),p((a(),r(d,{size:"sm",type:"primary",onClick:s[2]||(s[2]=e=>b())},{default:o(()=>[u(" 新增 ")]),_:1})),[[f,["sys:user:add","sys:user:save"]]])]),operator:o(({row:e})=>[p((a(),r(d,{size:"xs",type:"primary",onClick:n=>b(e)},{default:o(()=>[u(" 修改 ")]),_:2},1032,["onClick"])),[[f,["sys:user:edit","sys:user:update"]]]),p((a(),r(d,{size:"xs",type:"danger",onClick:n=>H(e)},{default:o(()=>[u(" 删除 ")]),_:2},1032,["onClick"])),[[K,"sys:user:delete"]])]),tagNames:o(({row:e})=>[S("div",le,[(a(!0),T(J,null,O(e.tagNames,n=>(a(),r(L,{key:n,"max-width":"100px",style:{margin:"2px"}},{default:o(()=>[u(g(n||"无"),1)]),_:2},1024))),128))])]),isShow:o(({row:e})=>[c($,{modelValue:e.isShow,"onUpdate:modelValue":n=>e.isShow=n,"onswitch-text":"显示","unswitch-text":"不显示"},null,8,["modelValue","onUpdate:modelValue"])]),createTime:o(({row:e})=>[S("span",null,g(m(w)(e.createTime,"yyyy-M-d H:m:s")),1)]),developerStartTime:o(({row:e})=>[e.developerStartTime?(a(),T("span",me,g(m(w)(e.developerStartTime,"yyyy-M-d H:m:s")),1)):V("",!0)]),developerEndTime:o(({row:e})=>[e.developerEndTime?(a(),T("span",ue,g(m(w)(e.developerEndTime,"yyyy-M-d H:m:s")),1)):V("",!0)]),issuesDescription:o(({row:e})=>[S("div",{innerHTML:e.issuesDescription},null,8,de)]),_:1},8,["selected-keys","loading","page","columns","data-source","default-toolbar"])]),_:1},8,["title"]),c(se,{visible:x.value,"onUpdate:visible":s[4]||(s[4]=e=>x.value=e),"form-data":N.value,onDone:y},null,8,["visible","form-data"])]),_:1})}}});export{ze as default};
