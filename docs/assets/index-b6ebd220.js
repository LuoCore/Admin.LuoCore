import{r as H}from"./index-b873fbdd.js";import{d as M,B as R,C as G,r as n,D as K,E as I,a,c as i,w as t,b as l,t as c,G as d,e as u,f as k,l as Z,F as A,H as j,x as g,Z as p,A as q,V as J}from"./index-9c77520b.js";import{x as O}from"./index-a07f0d91.js";import{_ as P}from"./index-7ab2fe9b.js";/* empty css              */import{u as Q}from"./useConfirm-3d6c3304.js";import{f as W}from"./common-42edaf76.js";import X from"./IssuesWorkEditDialog-25bcf42f.js";import Y from"./IssuesWorkSearchForm-e1c7640b.js";import{g as ee,h as se}from"./Issues-3f2ad0cb.js";import{$ as te}from"./index2-5bd3cf1b.js";import"./index2-f0c41502.js";import"./index2-72193fcd.js";import"./index-ff45222d.js";import"./index-481feabf.js";const oe=[{key:"issuesWorkTypeId",title:"序号",width:"80px",fixed:"left",sort:"desc"},{key:"issuesWorkTypeName",title:"问题工作类型名称",width:"150px"},{key:"issuesWorkTypeDescription",title:"问题工作类型描述",align:"center",width:"400px"},{key:"sortId",title:"排序号",align:"center",width:"80px"},{key:"createTime",title:"创建时间",align:"center",width:"190px",customSlot:"createTime"},{key:"operator",title:"操作",align:"left",customSlot:"operator",fixed:"right",width:"200px"}],ae={style:{display:"grid"}},we=M({__name:"index",setup(ie){var S;const V=((S=R().meta)==null?void 0:S.title)||"",{loading:z,setLoading:f}=G(!0),h=n(),x=n([]),w=n([]),B=n(["filter"]),_=n(!1),T=n(),D=K({issuesWorkTypeId:0,issuesWorkTypeName:""});f(!1);async function v(){f(!0);try{const o=await ee(D);if(!o||!o.isSuccess){p.confirm(o.message||"查询数据失败！");return}x.value=o.responseData}catch{}finally{f(!1)}}function F(o){if(!o){p.msg("无法获取到行的数据信息",{icon:2,time:2e3});return}Q("确定要删除这条数据吗？",async()=>{try{const s=await se(o.issuesWorkTypeId);if(!s||!s.isSuccess){p.confirm(s.message||"操作失败",{icon:2});return}p.msg(s.message||"操作成功",{icon:1}),v()}catch(s){p.msg(s.message,{icon:2})}finally{}})}function b(o){T.value=o,_.value=!0}return(o,s)=>{const m=q,N=te,C=J,$=P,E=O,L=H,y=I("any-permission"),U=I("permission");return a(),i(L,{fluid:"true",class:"z-container"},{default:t(()=>[l(E,{title:c(V)},{default:t(()=>[l(Y,{ref_key:"searchForm",ref:h,formData:D},null,8,["formData"]),l($,{"selected-keys":w.value,"onUpdate:selectedKeys":s[3]||(s[3]=e=>w.value=e),loading:c(z),columns:c(oe),"data-source":x.value,"default-toolbar":B.value,"auto-cols-width":!0,"min-height":"450px"},{toolbar:t(()=>[d((a(),i(m,{size:"sm",type:"normal",onClick:s[0]||(s[0]=e=>v())},{default:t(()=>[u(" 查询 ")]),_:1})),[[y,["sys:user:add","sys:user:save"]]]),d((a(),i(m,{size:"sm",border:"blue",onClick:s[1]||(s[1]=e=>h.value.resetFormData())},{default:t(()=>[u(" 重置表单 ")]),_:1})),[[y,["sys:user:add","sys:user:save"]]]),d((a(),i(m,{size:"sm",type:"primary",onClick:s[2]||(s[2]=e=>b())},{default:t(()=>[u(" 新增 ")]),_:1})),[[y,["sys:user:add","sys:user:save"]]])]),operator:t(({row:e})=>[d((a(),i(m,{size:"xs",type:"primary",onClick:r=>b(e)},{default:t(()=>[u(" 修改 ")]),_:2},1032,["onClick"])),[[y,["sys:user:edit","sys:user:update"]]]),d((a(),i(m,{size:"xs",type:"danger",onClick:r=>F(e)},{default:t(()=>[u(" 删除 ")]),_:2},1032,["onClick"])),[[U,"sys:user:delete"]])]),tagNames:t(({row:e})=>[k("div",ae,[(a(!0),Z(A,null,j(e.tagNames,r=>(a(),i(N,{key:r,"max-width":"100px",style:{margin:"2px"}},{default:t(()=>[u(g(r||"无"),1)]),_:2},1024))),128))])]),isShow:t(({row:e})=>[l(C,{modelValue:e.isShow,"onUpdate:modelValue":r=>e.isShow=r,"onswitch-text":"显示","unswitch-text":"不显示"},null,8,["modelValue","onUpdate:modelValue"])]),createTime:t(({row:e})=>[k("span",null,g(c(W)(e.createTime,"yyyy-M-d H:m:s")),1)]),issueTime:t(({row:e})=>[k("span",null,g(c(W)(e.issueTime,"yyyy-M-d H:m:s")),1)]),isDisable:t(({row:e})=>[l(C,{"model-value":e.isDisable,"onswitch-text":"是","onswitch-value":!0,"unswitch-text":"否","unswitch-value":!1},null,8,["model-value"])]),_:1},8,["selected-keys","loading","columns","data-source","default-toolbar"])]),_:1},8,["title"]),l(X,{visible:_.value,"onUpdate:visible":s[4]||(s[4]=e=>_.value=e),"form-date":T.value,onDone:v},null,8,["visible","form-date"])]),_:1})}}});export{we as default};
